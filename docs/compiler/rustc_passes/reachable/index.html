<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Finds local items that are “reachable”, which means that other crates need access to their compiled code or their runtime MIR. (Compile-time MIR is always encoded anyway, so we don’t worry about that here.)"><title>rustc_passes::reachable - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rustc_passes" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (0aeaa5eb2 2024-12-14)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../rustc_passes/index.html"><img class="rust-logo" src="../../static.files/rust-logo-9a9549ea.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../rustc_passes/index.html"><img class="rust-logo" src="../../static.files/rust-logo-9a9549ea.svg" alt="logo"></a><h2><a href="../../rustc_passes/index.html">rustc_<wbr>passes</a><span class="version">1.85.0-nightly</span></h2></div><div class="version">(0aeaa5eb2	2024-12-14)</div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module reachable</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate rustc_<wbr>passes</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">rustc_passes</a></span><h1>Module <span>reachable</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/rustc_passes/reachable.rs.html#1-505">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Finds local items that are “reachable”, which means that other crates need access to their
compiled code or their <em>runtime</em> MIR. (Compile-time MIR is always encoded anyway, so we don’t
worry about that here.)</p>
<p>An item is “reachable” if codegen that happens in downstream crates can end up referencing this
item. This obviously includes all public items. However, some of these items cannot be codegen’d
(because they are generic), and for some the compiled code is not sufficient (because we want to
cross-crate inline them). These items “need cross-crate MIR”. When a reachable function <code>f</code>
needs cross-crate MIR, then its MIR may be codegen’d in a downstream crate, and hence items it
mentions need to be considered reachable.</p>
<p>Furthermore, if a <code>const</code>/<code>const fn</code> is reachable, then it can return pointers to other items,
making those reachable as well. For instance, consider a <code>const fn</code> returning a pointer to an
otherwise entirely private function: if a downstream crate calls that <code>const fn</code> to compute the
initial value of a <code>static</code>, then it needs to generate a direct reference to this function –
i.e., the function is directly reachable from that downstream crate! Hence we have to recurse
into <code>const</code> and <code>const fn</code>.</p>
<p>Conversely, reachability <em>stops</em> when it hits a monomorphic non-<code>const</code> function that we do not
want to cross-crate inline. That function will just be codegen’d in this crate, which means the
monomorphization collector will consider it a root and then do another graph traversal to
codegen everything called by this function – but that’s a very different graph from what we are
considering here as at that point, everything is monomorphic.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ReachableContext.html" title="struct rustc_passes::reachable::ReachableContext">Reachable<wbr>Context</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.check_item.html" title="fn rustc_passes::reachable::check_item">check_<wbr>item</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.has_custom_linkage.html" title="fn rustc_passes::reachable::has_custom_linkage">has_<wbr>custom_<wbr>linkage</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.provide.html" title="fn rustc_passes::reachable::provide">provide</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.reachable_set.html" title="fn rustc_passes::reachable::reachable_set">reachable_<wbr>set</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">See module-level doc comment above.</div></li><li><div class="item-name"><a class="fn" href="fn.recursively_reachable.html" title="fn rustc_passes::reachable::recursively_reachable">recursively_<wbr>reachable</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Determines whether this item is recursive for reachability. See <code>is_recursively_reachable_local</code>
below for details.</div></li></ul></section></div></main></body></html>