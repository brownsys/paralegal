<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="If `node` is the “first node” in a macro expansion, returns `Some` with the `ExpnId` of the macro call site (i.e. the parent of the macro expansion)."><title>first_node_in_macro in clippy_utils::macros - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="clippy_utils" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (0aeaa5eb2 2024-12-14)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../clippy_utils/index.html">clippy_<wbr>utils</a><span class="version">1.85.0-nightly</span></h2></div><div class="version">(0aeaa5eb2	2024-12-14)</div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In clippy_<wbr>utils::<wbr>macros</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">clippy_utils</a>::<wbr><a href="index.html">macros</a></span><h1>Function <span class="fn">first_node_in_macro</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/clippy_utils/macros.rs.html#171-202">Source</a> </span></div><pre class="rust item-decl"><code>pub fn first_node_in_macro(
    cx: &amp;<a class="struct" href="../../rustc_lint/context/struct.LateContext.html" title="struct rustc_lint::context::LateContext">LateContext</a>&lt;'_&gt;,
    node: &amp;impl <a class="trait" href="trait.HirNode.html" title="trait clippy_utils::macros::HirNode">HirNode</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../rustc_span/hygiene/struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>If <code>node</code> is the “first node” in a macro expansion, returns <code>Some</code> with the <code>ExpnId</code> of the
macro call site (i.e. the parent of the macro expansion).</p>
<p>This generally means that <code>node</code> is the outermost node of an entire macro expansion, but there
are some caveats noted below. This is useful for finding macro calls while visiting the HIR
without processing the macro call at every node within its expansion.</p>
<p>If you already have immediate access to the parent node, it is simpler to
just check the context of that span directly (e.g. <code>parent.span.from_expansion()</code>).</p>
<p>If a macro call is in statement position, it expands to one or more statements.
In that case, each statement <em>and</em> their immediate descendants will all yield <code>Some</code>
with the <code>ExpnId</code> of the containing block.</p>
<p>A node may be the “first node” of multiple macro calls in a macro backtrace.
The expansion of the outermost macro call site is returned in such cases.</p>
</div></details></section></div></main></body></html>