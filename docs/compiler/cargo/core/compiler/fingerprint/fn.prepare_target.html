<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Determines if a `Unit` is up-to-date, and if not prepares necessary work to update the persisted fingerprint."><title>prepare_target in cargo::core::compiler::fingerprint - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="cargo" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (0aeaa5eb2 2024-12-14)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../cargo/index.html">cargo</a><span class="version">1.85.0-nightly</span></h2></div><div class="version">(0aeaa5eb2	2024-12-14)</div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In cargo::<wbr>core::<wbr>compiler::<wbr>fingerprint</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">cargo</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">compiler</a>::<wbr><a href="index.html">fingerprint</a></span><h1>Function <span class="fn">prepare_target</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/cargo/core/compiler/fingerprint/mod.rs.html#424-427">Source</a> </span></div><pre class="rust item-decl"><code>pub fn prepare_target(
    build_runner: &amp;mut <a class="struct" href="../build_runner/struct.BuildRunner.html" title="struct cargo::core::compiler::build_runner::BuildRunner">BuildRunner</a>&lt;'_, '_&gt;,
    unit: &amp;<a class="struct" href="../unit/struct.Unit.html" title="struct cargo::core::compiler::unit::Unit">Unit</a>,
    force: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="type" href="../../../util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="struct" href="../job_queue/job/struct.Job.html" title="struct cargo::core::compiler::job_queue::job::Job">Job</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Determines if a <a href="../unit/struct.Unit.html" title="struct cargo::core::compiler::unit::Unit"><code>Unit</code></a> is up-to-date, and if not prepares necessary work to
update the persisted fingerprint.</p>
<p>This function will inspect <code>Unit</code>, calculate a fingerprint for it, and then
return an appropriate <a href="../job_queue/job/struct.Job.html" title="struct cargo::core::compiler::job_queue::job::Job"><code>Job</code></a> to run. The returned <code>Job</code> will be a noop if
<code>unit</code> is considered “fresh”, or if it was previously built and cached.
Otherwise the <code>Job</code> returned will write out the true fingerprint to the
filesystem, to be executed after the unit’s work has completed.</p>
<p>The <code>force</code> flag is a way to force the <code>Job</code> to be “dirty”, or always
update the fingerprint. <strong>Beware using this flag</strong> because it does not
transitively propagate throughout the dependency graph, it only forces this
one unit which is very unlikely to be what you want unless you’re
exclusively talking about top-level units.</p>
</div></details></section></div></main></body></html>