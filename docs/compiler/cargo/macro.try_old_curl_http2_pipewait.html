<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Enable HTTP/2 and pipewait to be used as it’ll allow true multiplexing which makes downloads much faster."><title>try_old_curl_http2_pipewait in cargo - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="cargo" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (0aeaa5eb2 2024-12-14)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../cargo/index.html">cargo</a><span class="version">1.85.0-nightly</span></h2></div><div class="version">(0aeaa5eb2	2024-12-14)</div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">cargo</a></span><h1>Macro <span class="macro">try_old_curl_http2_pipewait</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/cargo/util/network/mod.rs.html#73-82">Source</a> </span></div><pre class="rust item-decl"><code>macro_rules! try_old_curl_http2_pipewait {
    ($multiplexing:expr, $handle:expr) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Enable HTTP/2 and pipewait to be used as it’ll allow true multiplexing
which makes downloads much faster.</p>
<p>Currently Cargo requests the <code>http2</code> feature of the <code>curl</code> crate which
means it should always be built in. On OSX, however, we ship cargo still
linked against the system libcurl. Building curl with ALPN support for
HTTP/2 requires newer versions of OSX (the SecureTransport API) than we
want to ship Cargo for. By linking Cargo against the system libcurl then
older curl installations won’t use HTTP/2 but newer ones will. All that to
basically say we ignore errors here on OSX, but consider this a fatal error
to not activate HTTP/2 on all other platforms.</p>
<p><code>pipewait</code> is an option which indicates that if there’s a bunch of parallel
requests to the same host they all wait until the pipelining status of the
host is known. This means that we won’t initiate dozens of connections but
rather only one. Once the main one is opened we realized that pipelining is
possible and multiplexing is possible. All in all this reduces the number
of connections down to a more manageable state.</p>
</div></details></section></div></main></body></html>