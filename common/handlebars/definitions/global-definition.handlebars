{{intro}}

{{#if filter}}
    ;
    let {{var}}_nodes = {{inner_var}}_nodes.filter(|n| {
        let {{inner_var}} = *n;
        ctx.controller_contexts().any(|ctx| {
            {{{filter}}}
        })
    })
{{/if}}
.collect::<Vec<_>>();